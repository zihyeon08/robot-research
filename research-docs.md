# 6자유도 로봇팔 동역학 모델링 및 제어 최적화 연구 계획서

---

## 🧠 연구 목적
- 6자유도 로봇팔의 운동을 분석하고, 라그랑주 역학과 해밀턴 역학을 활용하여 토크를 계산함으로써 로봇팔의 정밀한 동작을 설계한다.
- 로봇팔의 위치 및 자세를 수학적으로 표현하고, 이를 실제 하드웨어로 구현하여 실험을 통한 고찰을 수행한다.
- 수치해석 및 통계 기반 데이터 분석 기법을 활용하여 로봇팔 동작을 최적화한다.

---

## 🧪 연구 가설
> 라그랑주 역학을 사용하여 로봇팔의 토크를 계산할 시, 뉴턴 역학을 사용할 때보다 더 효율적인 제어가 가능할 것이다.

---

## 📊 연구 단계 및 세부 진행 방식

### ✅ 1단계: 로봇팔 구조 분석 및 수학적 모델링

- **목표**: 로봇팔의 기구학적 구조를 수학적으로 모델링하여 말단 위치를 계산할 수 있는 모델 구축
- **진행 방식**:
  1. 각 관절(i)에 대해 DH 파라미터(θ, d, a, α) 정의
  2. Python (SymPy) 또는 MATLAB을 사용하여 링크 간 변환행렬 \( T_{i-1}^{i} \) 유도
  3. 모든 행렬을 곱하여 전체 위치/자세 변환행렬 \( T_0^6 \) 도출
  4. 말단 위치와 자세를 Forward Kinematics로 표현

---

### ✅ 2단계: 동역학 모델링 (라그랑주 기반)

- **목표**: 라그랑주 역학을 기반으로 관절별 토크 계산 수식 유도
- **진행 방식**:
  1. 각 링크의 질량 \( m_i \), 관성 모멘트 \( I_i \), 무게중심 좌표 입력
  2. Python으로 각 링크의 운동에너지 \( T_i \), 위치에너지 \( V_i \) 계산
  3. 전체 라그랑지안 \( L = T - V \) 도출
  4. 라그랑주 방정식:
     \[
     \tau_i = \frac{d}{dt} \left( \frac{\partial L}{\partial \dot{q}_i} \right) - \frac{\partial L}{\partial q_i}
     \]
     를 이용하여 \( \tau_i \) 수식화
  5. Python 코드로 자동 미분 및 수치화 가능하도록 정리

---

### ✅ 3단계: 관절 데이터 측정 시스템 구축

- **목표**: 각 관절의 실시간 상태(각도, 속도, 가속도)를 측정할 수 있는 시스템 구축
- **진행 방식**:
  1. MG90S 서보모터를 사용하여 로봇팔 구성
  2. MG90S는 피드백 불가 → 각 관절에 **AS5600 센서** 장착
  3. Arduino를 사용하여 주기적으로 센서 각도 읽기 (예: 20ms 간격)
  4. 각속도, 각가속도는 Python에서 시간 차분으로 계산
     ```python
     theta_dot = (theta_now - theta_prev) / dt
     theta_ddot = (theta_dot - theta_dot_prev) / dt
     ```
  5. 센서 데이터를 Python으로 실시간 전송 (PySerial) 및 로깅

---

### ✅ 4단계: 토크 계산 및 시뮬레이션

- **목표**: 실측 데이터를 기반으로 라그랑주 수식에서의 토크를 실시간으로 계산
- **진행 방식**:
  1. 측정된 각도, 속도, 가속도를 토크 수식에 대입
  2. 계산된 토크 값을 그래프로 시각화
  3. 특정 궤적 (예: 직선, 곡선 경로)을 설정하고, 해당 경로에서 필요한 토크 패턴을 예측
  4. 시뮬레이션 도구(Python 기반 또는 PyBullet 활용)에서 모델 구현 및 시뮬레이션 검증

---

### ✅ 5단계: 제어 시스템 설계 및 실험

- **목표**: 계산된 토크를 기반으로 제어기 설계 및 로봇팔에 적용
- **진행 방식**:
  1. PID 제어기 설계: 목표 각도 → 실제 각도로 제어
  2. 라그랑주 토크를 피드포워드 제어로 활용
     \[
     u = \tau_{라그랑주} + K_p e + K_d \dot{e}
     \]
  3. 동일한 궤적을 따라가는 실험 수행
  4. 목표 궤적 vs 실제 궤적 비교 분석

---

### ✅ 6단계: 데이터 기반 분석 및 최적화

- **목표**: 실험 데이터를 분석하여 성능을 수치화하고, 머신러닝을 활용해 제어 성능 향상 시도
- **진행 방식**:
  1. 시간별 측정 데이터 → CSV 저장
  2. 오차(RMSE), 응답 시간, 오버슈트 등 계산
  3. scikit-learn으로 랜덤 포레스트 회귀모델 → 토크 예측
  4. PyTorch로 신경망 학습 → 입력 관절 상태 → 출력 토크
  5. ML 모델을 제어기 보조 입력 또는 예측 제어기로 활용

---

### ✅ 7단계: 가설 검증 (라그랑주 vs 뉴턴 역학)

- **목표**: 두 이론 기반 제어 방식의 성능을 정량적으로 비교하여 가설을 검증
- **진행 방식**:
  1. 동일한 제어 조건에서 라그랑주 제어 / 뉴턴 제어 각각 실행
  2. 실험당 RMSE, 오버슈트, 에너지 사용량 등 기록
  3. 비교 테이블 작성:

    | 지표 | 라그랑주 | 뉴턴 | 비교 |
    |------|----------|------|------|
    | RMSE | 1.2°     | 3.8° | ✅ 라그랑주 우수 |
    | 응답시간 | 0.8s | 1.1s | ✅ 라그랑주 우수 |
    | 오버슈트 | 5%   | 12%  | ✅ 라그랑주 우수 |

  4. 결론 도출: 가설 채택 여부 명확히 서술

---

## 🚀 기대 효과
- 이론과 실험을 결합한 정밀한 로봇 제어 가능성 확보
- 라그랑주 기반 제어의 실제 적용성과 효율성 검증
- 데이터 기반 예측 제어 및 최적화 적용 가능

---

## 🛠 사용 툴 요약

| 분야              | 툴/프레임워크                     |
|-------------------|----------------------------------|
| 모델링            | Python (SymPy), MATLAB           |
| 센서 데이터 수집   | Arduino, 오렌지보드               |
| 실시간 통신       | Python (PySerial)                |
| 시각화/수치해석   | Python (NumPy, Matplotlib)       |
| 시뮬레이션        | PyBullet, Gazebo (선택사항)       |
| 데이터 분석/ML    | scikit-learn, pandas, PyTorch     |

---
